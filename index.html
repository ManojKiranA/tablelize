<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Tablelize by softerize</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="assets/css/normalize.css" media="screen">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,700" rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="assets/css/font-awesome.min.css" media="screen">
    <link rel="stylesheet" type="text/css" href="assets/css/agate.css" media="screen">
    <link rel="stylesheet" type="text/css" href="assets/css/stylesheet.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Tablelize</h1>
      <h2 class="project-tagline">Customizable Laravel Eloquent html tables with pagination, search, sorting and buttons.</h2>
      <a href="https://github.com/softerize/tablelize" class="btn">View on GitHub</a>
      <a href="https://github.com/softerize/tablelize/zipball/master" class="btn">Download .zip</a>
      <a href="https://github.com/softerize/tablelize/tarball/master" class="btn">Download .tar.gz</a>
    </section>

    <section class="index">
        <span class="show-index fa fa-bars"></span>
    </section>
    
    <section class="main-content">
      <h1><a id="tablelize" class="anchor" href="#tablelize" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Tablelize</h1>

<p>Customizable Laravel Eloquent html tables with pagination, search, sorting and buttons.</p>

<h2><a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Installation</h2>

<p>Require it directly with composer:</p>

<pre><code class="bash">$ composer require softerize/tablelize</code></pre>

<p>Or add it to composer.json:</p>

<pre><code class="json">{
    "require": {
        "softerize/tablelize": "&#94;0.1.0"
    }
}
</code></pre>

<p>After updating composer, add the ServiceProvider to the providers array in config/app.php</p>

<pre><code class="php">Softerize\Tablelize\TablelizeServiceProvider::class,</code></pre>

<h2><a id="executing" class="anchor" href="#executing" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Executing</h2>

<h3><a id="simple" class="anchor" href="#simple" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Simple</h3>

<p>In your route/controller, do the following:</p>

<pre><code class="php">Route::get('links', function(\Illuminate\Http\Request $request){
    // Create the html table using your model and the request object
    $tablelize = new \Softerize\Tablelize\Tablelize('\App\Models\Link', $request);
    return view('home.index', compact('tablelize'));
});</code></pre>

<p>In your view simply generate the HTML:</p>

<pre><code class="php">@extends('layouts.app')

@section('content')
{!! $tablelize->generate() !!}
@endsection</code></pre>

<p>This is what you'll get (field names are fetched using <code class="inline">trans('validation.attributes.'.$field)</code>):</p>

<p class="center"><img src="assets/img/example-simple.png" alt="Simple example"></p>

<h3><a id="advanced" class="anchor" href="#advanced" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Advanced</h3>

<p>If you want to customize fields and add buttons you can use the following logic:</p>

<pre><code class="php">Route::get('links', function(\Illuminate\Http\Request $request){
    // You can define this array inside your model
    $options = [
        'fields' => [
            'name',
            'url',
            [
                'name'   => 'updated_at',
                'label'  => 'Date',
                'method' => 'formatDate'
            ],
            [
                'name'   => 'level',
                'label'  => 'Level',
                'method' => 'displayLevel',
                'escape' => false,
                'search' => false
            ]
        ],
        'buttons' => [
            [
                'url'  => 'new-link',
                'icon' => 'glyphicon glyphicon-plus',
                'text' => 'New'
            ]
        ],
        'rowActions' => [
            [
                'url'  => 'view-link',
                'icon' => 'glyphicon glyphicon-search',
                'text' => 'View'
            ]
        ]
    ];

    $tablelize = new \Softerize\Tablelize\Tablelize('\App\Models\Link', $request, $options);
    return view('home.index', compact('tablelize'));
});</code></pre>

<p>The view is the same as before. In your model you can define methods to display in your table:</p>

<pre><code class="php">    public function formatDate($field_value) {
        return date('jS \of F Y', strtotime($field_value));
        // Or
        // return $this->updated_at->format('jS \of F Y');
    }

    public function displayLevel($field_value) {
        if($field_value === 'Google') {
            return '<span class="label label-success">High</span>';
        }
        return '<span class="label label-danger">Low</span>';
    }</code></pre>

<p>The result of the advanced example is:</p>

<p class="center"><img src="assets/img/example-advanced.png" alt="Advanced example"></p>

<h3><a id="fks" class="anchor" href="#fks" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Relationships</h3>

<p>If you want to use relationships in your table, you can do the following:</p>

<pre><code class="php">Route::get('links', function(\Illuminate\Http\Request $request){
    // Query with a join statement
    $query = \App\Models\Link::select('links.id', 'links.name', 'links.url', 'links.updated_at', 
                'links.level', 'types.name as type_name', 'types.name as type_name')
            ->join('types', 'types.id', '=', 'links.type_id');
            
    // You can define this array inside your model
    $options = [
        'fields' => [
            [
                'name'   => 'name',
                'label'  => 'Name',
                'search' => 'links.name' // Prevent conflict with types.name
            ],
            'url',
            [
                'name'   => 'updated_at',
                'label'  => 'Date',
                'method' => 'formatDate',
                'search' => 'links.updated_at' // Prevent conflict with types.updated_at
            ],
            [
                'name'   => 'level',
                'label'  => 'Level',
                'method' => 'displayLevel',
                'escape' => false,
                'search' => false
            ],
            [
                'name'   => 'type_name',
                'label'  => 'Type',
                'search' => 'types.name' // Prevent conflict with links.name
            ]
        ],
        'buttons' => [
            [
                'url'  => 'new-link',
                'icon' => 'glyphicon glyphicon-plus',
                'text' => 'New'
            ]
        ],
        'rowActions' => [
            [
                'url'  => 'view-link',
                'icon' => 'glyphicon glyphicon-search',
                'text' => 'View'
            ]
        ]
    ];

    $tablelize = new \Softerize\Tablelize\Tablelize($query, $request, $options);
    return view('home.index', compact('tablelize'));
});</code></pre>

<p>The view is the same and you'll also need the model methods defined in the advanced example.</p>

<h2><a id="customizing" class="anchor" href="#customizing" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Customizing</h2>

<p>You can customize the table by setting the instance parameters (of course) as well as by replacing the package assets.</p>

<h3><a id="customizing-config" class="anchor" href="#customizing-config" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Config</h3>

<p>Execute the following command to publish the config file:</p>

<pre><code class="bash">$ php artisan vendor:publish --provider="Softerize\Tablelize\TablelizeServiceProvider" --tag="config"</code></pre>

<p>This will add a <em>tablelize.php</em> config file to your config folder.</p>

<h3><a id="customizing-translations" class="anchor" href="#customizing-translations" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Translations</h3>

<p>Execute the following command to publish the translation file:</p>

<pre><code class="bash">$ php artisan vendor:publish --provider="Softerize\Tablelize\TablelizeServiceProvider" --tag="translations"</code></pre>

<p>This will add Tablelize translation to <em>resources/lang/vendor/tablelize/</em>.</p>

<h3><a id="customizing-views" class="anchor" href="#customizing-views" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Views</h3>

<p>Execute the following command to publish the views:</p>

<pre><code class="bash">$ php artisan vendor:publish --provider="Softerize\Tablelize\TablelizeServiceProvider" --tag="views"</code></pre>

<p>This will add Tablelize view(s) to <em>resources/views/vendor/tablelize/</em>. Currently it's only one big view, but it will be refactored (hopefully) soon.</p>

<h2><a id="documentation" class="anchor" href="#documentation" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Documentation</h2>

<h3><a id="creating-the-instance" class="anchor" href="#creating-the-instance" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Creating the instance</h3>

<p>In order to create a new instance, you have to instantiate the class <code class="inline">\Softerize\Tablelize\Tablelize</code>. The construct method takes 3 paramenters <code class="inline">($query, Request $request, array $options = [])</code>.</p>

<h4><a id="query" class="anchor" href="#query" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>$query</h4>

<p>You have 3 possibilities to use as the first parameter:</p>

<p>Use a model instance:</p>

<pre><code class="php">$tablelize = new \Softerize\Tablelize\Tablelize(new \App\Models\Link, $request, $options);</code></pre>

<p>Use a query builder object:</p>

<pre><code class="php">$query = \App\Models\Link::select('name', 'url', 'updated_at')->where('created_at', '>', '2016-08-01');
$tablelize = new \Softerize\Tablelize\Tablelize($query, $request, $options);</code></pre>

<p>Simply use a string with the model name (complete with all namespaces):</p>

<pre><code class="php">$tablelize = new \Softerize\Tablelize\Tablelize('\App\Models\Link', $request, $options);</code></pre>

<h4><a id="request" class="anchor" href="#request" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>$request</h4>

<p>This is the request object you get from Laravel.</p>

<h4><a id="options" class="anchor" href="#options" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>$options</h4>

<p>Array with all options. For a list of all possible options please check the next section.</p>

<h3><a id="list-of-options" class="anchor" href="#list-of-options" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Options</h3>

<h4><a id="url" class="anchor" href="#url" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>url</h4>

<p>Define the base URL to be used by the search form.</p>

<p><small><em>Default:</em> current URL (<code>$request-&gt;path()</code>)</small></p>

<pre><code class="php">$options = [
    'url' => 'links'
];</code></pre>

<h4><a id="id" class="anchor" href="#id" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>id</h4>

<p>In case you have more than one table in the same page (inside tabs for example), you can use the ID to differentiate them.</p>

<p><small><em>Default:</em> current URL, with _ replacing the /</small></p>

<pre><code class="php">$options = [
    'id' => 'links'
];</code></pre>

<h4><a id="idField" class="anchor" href="#idField" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>idField</h4>

<p>You can define the table id field name with this option. It will be used in the rowActions URL to set the entry ID (<code class="inline">url('your/url', $entry->{$idField})</code>).</p>

<p><small><em>Default:</em> 'id'</small></p>

<pre><code class="php">$options = [
    'idField' => 'link_id'
];</code></pre>

<h4><a id="fields" class="anchor" href="#fields" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>fields</h4>

<p>Array with fields definition. You can use methods as well for greater control over the display. Each field can be a simple string with the field name or an array with the following options:</p>

<ul>
<li>name: field name</li>
<li>label: field label</li>
<li>method: model method to be executed - optional</li>
<li>escape: can be defined as false to for HTML values</li>
<li>search: if you use joins in your query, you can define the search term used for the query - 'links.id' - to avoid errors. It can be defined as false to prevent searching this field</li>
</ul>

<p><small><em>Default:</em> fields will be automatically fetched from the query or the model - labels will be <code class="inline">trans('validation.attributes.'.$field_name)</code></small></p>

<pre><code class="php">$options = [
    'fields' => [
        [
            'name'   => 'id',
            'label'  => 'ID',
            'search' => 'links.id'
        ],
        'name',
        [
            'name'   => 'updated_at',
            'label'  => 'Date',
            'method' => 'formatDate'
        ],
        [
            'name'   => 'name',
            'label'  => 'Level',
            'method' => 'displayLevel',
            'escape' => false,
            'search' => false
        ]
    ]
];</code></pre>

<h4><a id="querystring" class="anchor" href="#querystring" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>queryString</h4>

<p>Array with additional query string values. Useful if you need to define which tab the table is associated with. This way when you take an action on an specific table, the queryString parameters will be sent with the request.</p>

<p><small><em>Default:</em> empty</small></p>

<pre><code class="php">$options = [
    'queryString' => [
        'tab' => 'links'
    ]
];</code></pre>

<h4><a id="sort-and-sortorder" class="anchor" href="#sort-and-sortorder" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>sort and sortOrder</h4>

<p>Default field for sorting and initial sort order.</p>

<p><small><em>Default:</em> first field from the table in ASC order</small></p>

<pre><code class="php">$options = [
    'sort' => 'name',
    'sortOrder' => 'desc'
];</code></pre>

<h4><a id="buttons" class="anchor" href="#buttons" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>buttons</h4>

<p>Array with buttons definition. Each button can be a string with the HTML or an array with the following options:</p>

<ul>
<li>text: button text</li>
<li>url: button link</li>
<li>icon: if you want to add an icon to the button - optional</li>
<li>css: class to be used by the button - optional - by default all buttons will be 'btn btn-primary'</li>
<li>title: title attribute of the button - optional</li>
</ul>

<p><small><em>Default:</em> none</small></p>

<pre><code class="php">$options = [
    'buttons' => [
        [
            'url'   => 'new-link',
            'icon'  => 'glyphicon glyphicon-plus',
            'text'  => 'New',
            'title' => 'New link'
        ],
        [
            'url'   => 'settings',
            'icon'  => 'glyphicon glyphicon-cog',
            'text'  => 'Settings',
            'title' => 'Settings',
            'css'   => 'btn btn-success'
        ]
    ]
];</code></pre>

<h4>
<a id="rowactions" class="anchor" href="#rowactions" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>rowActions</h4>

<p>Array with buttons for each entry. Each button can be a string with the HTML or an array with the following options:</p>

<ul>
<li>text: button text</li>
<li>url: button link - the idField will be added as a parameter for each entry</li>
<li>icon: if you want to add an icon to the button - optional</li>
<li>css: class to be used by the button - optional - by default all buttons will be 'btn btn-primary'</li>
<li>title: title attribute of the button - optional</li>
<li>condition: method used as a condition to show (or not) the button - optional</li>
</ul>

<p><small><em>Default:</em> none</small></p>

<pre><code class="php">$options = [
    'rowActions' => [
        [
            'url'   => 'view-link',
            'icon'  => 'glyphicon glyphicon-search',
            'text'  => 'View',
            'title' => 'View entry'
        ],
        [
            'url'   => 'delete-link',
            'icon'  => 'glyphicon glyphicon-remove',
            'text'  => 'Delete',
            'title' => 'Delete',
            'css'   => 'btn btn-danger'
        ],
        [
            'url'       => 'approve-link',
            'icon'      => 'glyphicon glyphicon-ok',
            'text'      => 'Approve',
            'title'     => 'Approve',
            'css'       => 'btn btn-success',
            'condition' => 'notApproved'
        ]
    ]
];</code></pre>

<h4><a id="noentriesmsg" class="anchor" href="#noentriesmsg" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>noEntriesMsg</h4>

<p>In case you want to change the message shown when there are no entries you can do that using this parameter.</p>

<p><small><em>Default:</em> 'No entries found.' or whatever you define in the translation file.</small></p>

<pre><code class="php">$options = [
    'noEntriesMsg' => 'Nothing here!!'
];</code></pre>

<h2><a id="support" class="anchor" href="#support" aria-hidden="true"><span aria-hidden="true" class="fa fa-link"></span></a>Support</h2>

<p>In case you need support, please create an issue and we will check it as soon as possible.</p>

<p>If you want to hire a professional support, let us know at <a href="http://www.softerize.com/contact/">http://www.softerize.com/contact/</a>.</p>

      <footer class="site-footer">
        <a href="http://www.softerize.com" class="softerize-btn">
            <img src="assets/img/softerize.jpg" alt="Softerize" />
        </a>

        <span class="site-footer-owner"><a href="https://github.com/softerize/tablelize">Tablelize</a> is maintained by <a href="https://github.com/softerize">softerize</a>.</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>
        and customized by <a href="https://github.com/oscardias">Oscar Dias</a>.</span>
      </footer>

    </section>

    <script type="text/javascript" src="https://code.jquery.com/jquery-3.1.1.min.js"></script>
    <script type="text/javascript" src="assets/js/highlight.pack.js"></script>
    <script type="text/javascript" src="assets/js/script.js"></script>
  
  </body>
</html>
